<ion-view id="pg_suggestions">
  <ion-nav-title>
      My Suggestions
      <button class="icon ion-plus-circled icon-accessory"
            style="float: right"
            ng-click="promptNewSuggestion()"></button>
  </ion-nav-title>
  <ion-content class="padding">
    <ion-item ng-if="!user"
          ng-click="logIn()"
          class="warning">
      <i class="ion-android-warning"></i>
      You are not logged in. Logging in helps us to keep track of the number
      of actual users, so your suggestions will receive stronger consideration.
      You will also be kept up to date when routes matching your suggestion
      are created.
    </ion-item>

    <div class="ion-list-header">Your Suggestions</div>
		<ion-list id="suggself">
        <ion-item class="item-icon-right"
                  ng-repeat="item in suggestions track by item.id"
                  ng-click="toggleSelected(item)"
                  >
            <rev-geocode x="item.board.coordinates[0]"
                         y="item.board.coordinates[1]"
                         description-1="item.board.description1"
                         description-2="item.board.description2"></rev-geocode>
            <rev-geocode x="item.alight.coordinates[0]"
                         y="item.alight.coordinates[1]"
                         description-1="item.alight.description1"
                         description-2="item.alight.description2"></rev-geocode>
            Arrive by {{item.time * 1000 - 8*60*60*1000| date:'h:mm'}}
            <br>Sent to operators for consideration
            <button ng-click="deleteSuggestion($event, item.id)">
              &#x274c;
            </button>
            {{item.numSimilar}} similar suggestions
            <div class="inline-suggestion-map"
                  ng-if="selectedItem == item"
                  ng-click="$event.stopPropagation()">
              <suggestion-viewer
                start-lat="item.board.coordinates[1]"
                start-lng="item.board.coordinates[0]"
                end-lat="item.alight.coordinates[1]"
                end-lng="item.alight.coordinates[0]"
                start-description-a="item.board.description1"
                start-description-b="item.board.description2"
                end-description-a="item.alight.description1"
                end-description-b="item.alight.description2"
              >
              </suggestion-viewer>
            </div>
            {{item.alight.geocode}}
  			</ion-item>
		</ion-list>

    <div class="ion-list-header">Suggestions Near You</div>
		<ion-list id="suggnear">
            <ion-item class="item-icon-right"
                ng-repeat="item in similarSuggestions track by item.id"
                ng-click="toggleSelected(item)"
                >
                <rev-geocode x="item.board.coordinates[0]"
                             y="item.board.coordinates[1]"></rev-geocode>
                <rev-geocode x="item.alight.coordinates[0]"
                            y="item.alight.coordinates[1]"></rev-geocode>
                Arrive by {{item.time * 1000 - 8*60*60*1000| date:'H:mm'}}
                <br>Sent to operators for consideration
			</ion-item>
		</ion-list>
  </ion-content>
</ion-view>
