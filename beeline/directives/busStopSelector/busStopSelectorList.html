<ion-modal-view class="stop-selector">
  <ion-header-bar class="my-header-bar bar bar-stable">
    <h1 class="title">{{title}}</h1>
    <a class="item-icon-right" ng-click="closeStopSelectModal()">
      <i class="icon ion-android-close"></i>
    </a>

    <ui-gmap-google-map
      center="map.center"
      zoom="map.zoom"
      bounds="map.bounds"
      control="map.mapControl"
      options="map.options"
      data-tap-disabled="true"
    >
      <ui-gmap-marker
        ng-repeat="stop in busStops"
        idkey="stop.id"
        coords="{
          latitude: stop.coordinates.coordinates[1],
          longitude: stop.coordinates.coordinates[0],
        }"
        options="markerOptions"
        ng-click="selectStop($event, stop)"
      ></ui-gmap-marker>

      <ui-gmap-circle
        ng-if="selectedStop"
        center="{
          longitude: selectedStop.coordinates.coordinates[0],
          latitude: selectedStop.coordinates.coordinates[1],
        }"
        radius="50">
      </ui-gmap-circle>
    </ui-gmap-google-map>
    <div class="ion-list-header">{{busStops.length}} stops available</div>
  </ion-header-bar>
  <ion-content class="big-container">
    <ion-list class="stops-list">
      <ion-item ng-repeat="stop in busStops">
        <ion-radio
                  ng-model="model"
                  ng-value="stop.id"
                  icon="ion-ios-circle-outline"
                  ng-click="selectStop($event, stop)"
                  >
          <div class="time">{{stop.time | formatTime}}</div>
          <div class="details">
            <div>{{stop.description}}</div>
            <div>{{stop.road}}</div>
          </div>
        </ion-radio>
      </ion-item>
    </ion-list>
  </ion-content>
  <ion-footer-bar>
    <button class="big-yellow"
            ng-disabled="!model"
            ng-click="selectStop($event, selectedStop)"
    >{{title}}</button>
  </ion-footer-bar>
</ion-modal-view>
