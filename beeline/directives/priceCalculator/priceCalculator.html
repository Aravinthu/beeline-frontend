<div id="price-calculator" class="date-price-calculator">
  <!--Selected Dates<br>-->
  <div><b>{{booking.selectedDates.length}} day(s)</b> were selected.</div>
  <div class="item-subtitle">Selected Dates </div>
  <div ng-show="isCalculating" class="spinner-block">
    <ion-spinner></ion-spinner>
    Calculating prices...
  </div>
  <table class="booking-info prices">
    <thead>
      <tr ng-if="booking.selectedDates.length != 0">
        <th>Selected Dates</th>
        <th>
          Price per trip
        </th>
      </tr>
    </thead>
    <tbody>
      <tr ng-if="booking.selectedDates.length == 0">
        <td colspan="2">Please select your trip dates</td>
      </tr>
      <tr ng-if="errorMessage">
        <td colspan="2" class="text-left">
          <i class="icon ion-alert-circled padding-right"></i> {{errorMessage}}
        </td>
      </tr>
      <tr ng-if="booking.selectedDates.length > 0" ng-repeat="pinfo in priceInfo.pricesPerTrip">
        <td>
          {{pinfo.startDate | date:'dd MMM (EEE)'}}
          <div ng-if="pinfo.bookingInfo.notes" class="trd ip-notes">
            <i class="ionicon ion-information-circled"></i> {{pinfo.bookingInfo.notes}}
          </div>
        </td>
        <td>${{pinfo.price | number:2}}</td>
      </tr>
    </tbody>
  </table>
  <span class="promoCredits">
    <div class="item-subtitle">Route Pass and Credits </div>
    <ul class="list">
      <ion-toggle ng-model="booking.useRouteCredits" ng-check="booking.useRouteCredits" toggle-class="toggle-royal" ng-if="booking.route.ridesRemaining && booking.route.ridesRemaining > 0">
        Use my Route Pass ({{ booking.route.ridesRemaining }} trips remaining)
      </ion-toggle>
      <ion-toggle toggle-class="toggle-royal">
        Use my Welcome Credits ($10.00)
      </ion-toggle>
      <li class="item item-input-inset">
        <label class="item-input-wrapper">
          <input type="text" placeholder="Enter Promo Code">
        </label>
        <button type="submit" class="button button-royal small-button">
          Apply
        </button>
      </li>
    </ul>
  </div>
  <div class="item-subtitle">Price Calculator </div>
  <table class="price-table totals booking-info" ng-if="booking.selectedDates.length > 0">
    <tbody>
      <tr>
        <th>Total Price</th>
        <td>{{(priceInfo.totalBeforeDiscount || 0) | currency}}</td>
      </tr>
      <tr ng-if="priceInfo.routeCredits && priceInfo.routeCredits.length > 0" ng-repeat="routeCredit in priceInfo.routeCredits">
        <th>Use Route Pass</th>
        <td>{{(-routeCredit.debit || 0) | currency}}</td>
      </tr> 
      <tr ng-if="priceInfo.discounts && priceInfo.discounts.length > 0" ng-repeat="discount in priceInfo.discounts">
        <th>{{discount.discount.description}}: {{discount.discount.code}}</th>
        <td>
          {{(-discount.debit || 0) | currency}}
        </td>
      </tr>
      <tr>
        <th>Total Due</th>
        <td>{{ (priceInfo.totalDue || 0) | currency}}</td>
      </tr>
      <!-- FIXME: include vouchers, discounts here -->
    </tbody>
  </table>

</div>
